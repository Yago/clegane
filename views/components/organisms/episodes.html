<div class="episodes-wrapper" ng-class="{in: episodes.episodeOpen}" ng-init="episodes.init({{tv.seasons|length}})" ng-controller="EpisodesCtrl as episodes">
  <tabset vertical="true" type="tabs">
    {% for season in tv.seasons %}
      {% if season.season_number !== 0 and season.episode_count > 0 %}
        <tab select="episodes.selectSeason({{tv.id}}, {{season.season_number}})">
          <tab-heading>
            s<span ng-hide="episodes.episodeOpen">eason </span>{{season.season_number|zero}}
          </tab-heading>
          <div>
            <tabset vertical="true" type="tabs">
              {% for episode in season.episode_count|numberArray %}
                <tab active="{% if loop.index == 1 %}episodes.seasonOpen[{{season.season_number}}]{% else %}false{% endif %}" select="episodes.selectEpisode({{tv.id}}, {{season.season_number}}, {{loop.index}})">
                  <tab-heading>
                    <span class="watch-toggle">
                      <input type="checkbox" ng-click="episodes.toggleWatch(); $event.stopPropagation();">
                      <i class="cleganicon cleganicon-eye"></i>
                    </span> e<span ng-hide="episodes.episodeOpen">pisode </span>{{loop.index|zero}}
                  </tab-heading>
                  <h3>Season [[episodes.seasonnumber]], Episode [[episodes.number]] : [[episodes.title]] <small>([[episodes.air_date]])</small></h3>
                  <div class="spacer spacer-xs"></div>

                  <div id="episode-gallery-[[episodes.seasonnumber]][[episodes.number]]" class="episode-gallery" itemscope itemtype="http://schema.org/ImageGallery">
                    <div class="episode-gallery-container">
                      <figure itemprop="associatedMedia" itemscope itemtype="http://schema.org/ImageObject" ng-repeat="(key, image) in episodes.images">
                        <a href="{{api.images}}[[image.file_path]]" itemprop="contentUrl" ng-click="episodes.openGallery(key); $event.preventDefault();">
                          {{picture.default('[[image.file_path]]', 1, 1.77, 'none', 'img-responsive', 'Season [[episodes.seasonnumber]], Episode [[episodes.number]] : [[episodes.title]]')}}
                        </a>
                      </figure>
                    </div>
                  </div>
                  <div class="spacer spacer-sm"></div>
                  <p>
                    [[episodes.description]]
                  </p>
                </tab>
              {% endfor %}
            </tabset>
          </div>
        </tab>
      {% endif %}
    {% endfor %}
  </tabset>
</div>
