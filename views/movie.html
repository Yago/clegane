{% extends 'layout.html' %}
{% import 'components/molecules/thumbnails.html' as thumbnail %}
{% import 'components/atoms/pictures.html' as picture %}

{% block wrapper-class %}{% endblock %}

{% block content %}
  <div class="cover">
    {% set cover = api.images + movie.backdrop_path %}
    {{picture.default(cover, 5, 2.38, 'center', 'img-responsive', movie.title)}}
    <div class="cover-content">
      <div class="content-container">
        <div class="row">
          <div class="col-sm-3">
            <div class="poster-wrapper">
              {% set poster = api.images + movie.poster_path %}
              {{picture.default(poster, 1, 0.66, 'none', 'img-responsive', movie.title)}}

              <ul class="list-unstyled">
                <li><b>Release</b> :<br> {{movie.release_date}}</li>
                <li><b>Countries</b> :<br> {% for country in movie.production_countries %}{{country.name}}{% if not loop.last %}, {% endif %}{% endfor %}</li>
              </ul>
              <br>

              {% if keywords %}
                {% for keyword in keywords %}
                  <a href="/tag/{{keyword.id}}/1">{{keyword.name}}</a>{% if not loop.last %},{% endif %}
                {% endfor %}
              {% endif %}

            </div>
          </div>
          <div class="col-sm-9">
            <h1>
              {{movie.title}} <small class="text-muted">({{movie.original_title}})</small>
            </h1>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="content-container">
    <div class="row">
      <div class="col-sm-9 col-sm-offset-3">

        <p class="lead">“{{movie.tagline}}”</p>

        {% for genre in movie.genres %}
          <a href="/genre/{{genre.id}}/1">
            {{genre.name}}
          </a>
          {% if not loop.last %} | {% endif %}
        {% endfor %}
        <br>

        <br>
        <a href="http://www.imdb.com/title/{{movie.imdb_id}}">IMDB</a>
        <br><br>

        <p>{{movie.overview}}</p>

        <br>
        {% if videos %}
          {% for video in videos %}
            {% if video.site === 'YouTube' && loop.key === 0 %}
              <div class="embed-responsive embed-responsive-16by9">
                <iframe class="embed-responsive-item" src="https://www.youtube.com/embed/{{video.key}}" frameborder="0" allowfullscreen></iframe>
              </div>
            {% endif %}
          {% endfor %}
        {% endif %}

      </div>
    </div>

    <hr>

    <h2>Cast</h2>
    <div class="row">
      {% for cast in credits.cast %}
        {% if loop.key <= 3 %}
        <div class="col-sm-3">
          {{ thumbnail.cast(cast) }}
        </div>
        {% endif %}
      {% endfor %}
    </div>

    <hr>

    {% if similar.length %}
    <h2>Similar</h2>
    <div class="row">
      {% for movie in similar %}
        {% if loop.key <= 3 %}
          <div class="col-sm-3">
            {{ thumbnail.movie(movie) }}
          </div>
        {% endif %}
      {% endfor %}
    </div>
    {% endif %}

  </div>
{% endblock %}
