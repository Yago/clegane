{% extends 'layout.html' %}

{% import 'components/thumbnails.html' as thumbnail %}

{% block content %}

  <h1>
    {% if type === 'search' %}
      {{query}}
    {% elseif genre %}
      {{genre.name}}
    {% elseif tag %}
      {{tag.name}}
    {% endif %}
    - {{data.total_results}} Results
  </h1>

  <div class="row">
    {% for result in data.results %}
      <div class="col-sm-3">
        {% if result.media_type === 'movie' || genre || tag %}
          {{ thumbnail.movie(result) }}
        {% else %}
          {{ thumbnail.tv(result) }}
        {% endif %}
      </div>
    {% endfor %}
  </div>

  {% if data.total_pages > 1 %}
    <nav class="text-center">
      <ul class="pagination">
        <li{% if data.page === 1 %} class="disabled"{% endif %}>
          <a href="/{{type}}/{{query}}/1" aria-label="First page">
            <span aria-hidden="true">&laquo;</span>
          </a>
        </li>
        <li{% if data.page === 1 %} class="disabled"{% endif %}>
          <a href="/{{type}}/{{query}}/{{data.page|previous}}" aria-label="Previous">
            <span aria-hidden="true">&lsaquo;</span>
          </a>
        </li>
        {% for i in data.total_pages|paginationArray(data.page) %}
          <li{% if data.page === i %} class="active"{% endif %}><a href="/{{type}}/{{query}}/{{i}}">{{i}}</a></li>
        {% endfor %}
        <li{% if data.page === data.total_pages %} class="disabled"{% endif %}>
          <a href="/{{type}}/{{query}}/{{data.page|next(data.total_pages)}}" aria-label="Next">
            <span aria-hidden="true">&rsaquo;</span>
          </a>
        </li>
        <li{% if data.page === data.total_pages %} class="disabled"{% endif %}>
          <a href="/{{type}}/{{query}}/{{data.total_pages}}" aria-label="Last page">
            <span aria-hidden="true">&raquo;</span>
          </a>
        </li>
      </ul>
    </nav>
  {% endif %}

{% endblock %}
